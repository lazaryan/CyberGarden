<!doctype html>
<html lang="en">
<head>
    <meta   charset="UTF-8" />
<meta   name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
<meta   http-equiv="X-UA-Compatible"
        content="ie=edge" />

<link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">

    <title>Login</title>

    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/login.css">
</head>
<body class="body_flex">
    <div class="login__form">
        <h2 class="login__title">Вход</h2>
        <div class="login__body">
            <div class="login__field">
                <label for="" class="login__label">Логин</label>
                <input type="text" name="name" id="name" class="login__input" autocomplete="off" />
            </div>
            <div class="login__field">
                <label for="" class="login__label">Пароль</label>
                <input type="password" name="password" id="password" class="login__input" autocomplete="off" />
            </div>
        </div>
        <div class="login__submit">
            <a href="./register.html" class="login__register">Зарегистрироваться?</a>
            <button type="submit" value="Войти" id="bth_act" class="login__submit-i">Войти</button>
        </div>
    </div>

    <img src="img/meowtwo.png" id="meowtwo" class="image">
    <img src="img/megaman.png" id="megaman" class="image">
    <img src="img/ponyta.png" id="ponyta" class="image">
    <img src="img/lapras.png" id="lapras" class="image">
    <img src="img/mario.png" id="mario" class="image">
    <img src="img/mushroom1.png" id="mushroom" class="image">
    <img src="img/star.png" id="star" class="image">
    <img src="img/Tottoro.png" id="tottoro" class="image">
    
    <script>
        let log = document.querySelector('#name');
        let password = document.querySelector('#password');
        let act = document.querySelector('#bth_act');

        act.addEventListener('click', function() {
            let text = `name=${log.value}&&password=${password.value}`;

            var xhr = new XMLHttpRequest();

            xhr.open('POST', './login.php', true);
            xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xhr.send(text);

            xhr.onreadystatechange = function () {
                if (xhr.readyState != 4) return;

                if (xhr.status != 200) {
                    console.warn(xhr.status + ': ' + xhr.statusText);
                } else {
                   if(xhr.response == 'OK') {
                    window.location.href = './main'
                } else {
                    alert('Не правильные данные')
                }
                }
            };
        })


    </script>
</body>
</html>